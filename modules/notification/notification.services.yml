parameters:

    # Store formatted items, this mean they cannot be translated anymore
    # but this might provide a serious performance boost if your formatters
    # implementations need to load objects from database
    apb.notification.store_formatted: false

    # Silent mode will force the backend to fail silently when trying to
    # display stuff that does not exists, perfect for production
    apb.notification.silent: false

    # Disabled notification types on the plateform, should be derivated
    # from a Drupal variable (which can be set from the admin UI)
    apb.notification.disabled_types: ~

services:

    apb.notification.formatter_registry:
        class: MakinaCorpus\APubSub\Notification\Registry\FormatterRegistry
        private: true

    apb.notification.chan_type_registry:
        class: MakinaCorpus\APubSub\Notification\Registry\ChanTypeRegistry
        private: true

    apb.notification:
        class: MakinaCorpus\APubSub\Notification\NotificationService
        arguments:
            - "@apb.backend"
            - "%apb.notification.store_formatted%"
            - "%apb.notification.silent%"
            - "%apb.notification.disabled_types%"
        calls:
            - [setFormatterRegistry, ["@apb.notification.formatter_registry"]]
            - [setChanTypeRegistry, ["@apb.notification.chan_type_registry"]]
